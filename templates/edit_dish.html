{% extends "base.html" %}
{% block content %}
<h2>Gerecht Bewerken: {{ gerecht.naam }}</h2>
<p>Categorie: {{ gerecht.categorie }}</p>
<p>Verkoopprijs: {{ gerecht.verkoopprijs if gerecht.verkoopprijs else 'n.v.t.' }}</p>
<p>Beschrijving: {{ gerecht.beschrijving if gerecht.beschrijving else 'Geen beschrijving' }}</p>

<h3>Ingrediënten toevoegen</h3>
<form method="POST" action="{{ url_for('edit_dish', chef_naam=chef_naam, dish_id=gerecht.dish_id) }}" style="display: flex; align-items: center;">
    <input type="hidden" name="ingredientForm" value="1">

    <label for="ingredient_id">Ingrediënt:</label>
    <select id="ingredient_id" name="ingredient_id" required>
        {% for ingr in alle_ingredienten %}
        <option value="{{ ingr.ingredient_id }}">{{ ingr.naam }} ({{ ingr.eenheid }})</option>
        {% endfor %}
    </select>

    <label for="hoeveelheid" style="margin-left: 10px;">Hoeveelheid:</label>
    <input type="number" step="0.01" id="hoeveelheid" name="hoeveelheid" required style="margin-left: 10px;">

    <button type="submit" style="margin-left: 10px;">Ingrediënt toevoegen</button>
</form>

<hr>

<!-- Lijst van ingrediënten die al zijn gekoppeld aan dit gerecht -->
<h3>Huidige Ingrediënten voor dit gerecht</h3>
{% if gerecht_ingredienten %}
<table border="1" cellpadding="5" cellspacing="0">
    <tr>
        <th>Ingrediënt</th>
        <th>Hoeveelheid</th>
        <th>Eenheid</th>
        <th>Prijs Totaal</th>
    </tr>
    {% for gi in gerecht_ingredienten %}
    <tr>
        <td>{{ gi.ingredient_naam }}</td>
        <td>{{ gi.hoeveelheid }}</td>
        <td>{{ gi.eenheid }}</td>
        <td>{{ gi.prijs_totaal }}</td>
    </tr>
    {% endfor %}
</table>
<p><strong>Totaal ingredient-kostprijs:</strong> {{ totaal_ingredient_prijs }}</p>
{% else %}
<p>Er zijn nog geen ingrediënten aan dit gerecht toegevoegd.</p>
{% endif %}

<a href="{{ url_for('manage_dishes', chef_naam=chef_naam) }}">Terug naar Gerechtenoverzicht</a>
{% endblock %}
