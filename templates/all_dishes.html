{% extends "base.html" %}
{% block content %}
<h2>Gerechten Overzicht</h2>
<p>Hier kunt u alle gerechten bekijken en beheren.</p>

<table border="1" cellpadding="5" cellspacing="0">
    <tr>
        <th>Gerecht</th>
        <th>Menuleer</th>
        <th>Kostprijs</th>
        <th>Verkoopprijs</th>
        <th>Acties</th>
        <th>Print</th>
    </tr>
    {% for gerecht in gerechten %}
    <tr>
        <td>{{ gerecht.naam }}</td>
        <td>{{ gerecht.categorie }}</td>
        <td>{{ gerecht.totaal_ingredient_prijs if gerecht.totaal_ingredient_prijs else 'n.v.t.' }}</td>
        <td>{{ gerecht.verkoopprijs if gerecht.verkoopprijs else 'n.v.t.' }}</td>
        <td>
            <a href="{{ url_for('edit_dish', chef_naam=session.get('chef_naam'), dish_id=gerecht.dish_id) }}" class="btn btn-sm btn-primary">Bewerken</a>
            
            <form method="POST" action="{{ url_for('export_dish', chef_naam=session.get('chef_naam'), dish_id=gerecht.dish_id) }}" style="display: inline;">
                <button type="submit" class="btn btn-sm btn-info">Export Recept</button>
            </form>
            
            <form method="POST" action="{{ url_for('delete_dish', dish_id=gerecht.dish_id) }}" style="display: inline;" onsubmit="return confirm('Weet u zeker dat u dit gerecht wilt verwijderen?');">
                <button type="submit" class="btn btn-sm btn-danger">Verwijderen</button>
            </form>
        </td>
        <td>
            <input type="checkbox" name="selected_dishes" value="{{ gerecht.dish_id }}" form="exportForm">
        </td>
    </tr>
    {% endfor %}
</table>

<form id="exportForm" method="POST" action="{{ url_for('export_dishes') }}">
    <button type="submit" style="margin-top: 20px;">Selecteer gerechten en print menukaart</button>
</form>

<div style="margin-top: 20px;">
    <a href="{{ url_for('dashboard', chef_naam=session.get('chef_naam')) }}" style="display: inline-block; margin-right: 20px;">Terug naar Dashboard</a>
    <a href="{{ url_for('manage_dishes', chef_naam=session.get('chef_naam')) }}" style="display: inline-block;">Gerecht Samenstellen</a>
</div>
{% endblock %}
